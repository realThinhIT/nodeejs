// ######################################################
// CORE: EXPRESSJS
// ######################################################

// set the server up
import express from 'express';

let app = express();
import { GlobalConfig } from '../../../config';
import { PLog, PCallback } from './modules/nodee';

// export app instance
export { app };

// setup express
try {
  require(__DIR_APP + 'setup/express');
} catch (e) {
  PLog.putException('[express] no pre-setup for express found or it has some issues', e);
}

// start the server
app.listen(GlobalConfig.SERVER_PORT || 8080, err => {
  if (err) {
    PLog.putException(err);
  }

  PLog.put('[webserver] server listening on port ' + GlobalConfig.SERVER_PORT || 8080 + '.');
});